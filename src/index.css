@import "tailwindcss";

/* Tailwind v4 theme tokens mapping -> enables bg-bg, text-fg, rounded-md, shadow-sm, etc. */
@theme {
  /* Colors */
  --color-bg: hsl(var(--bg));
  --color-fg: hsl(var(--fg));
  --color-surface: hsl(var(--surface));
  --color-muted: hsl(var(--muted));
  --color-border: hsl(var(--border));

  --color-brand-50: hsl(var(--brand-50));
  --color-brand-100: hsl(var(--brand-100));
  --color-brand-200: hsl(var(--brand-200));
  --color-brand-300: hsl(var(--brand-300));
  --color-brand-400: hsl(var(--brand-400));
  --color-brand-500: hsl(var(--brand-500));
  --color-brand-600: hsl(var(--brand-600));
  --color-brand-700: hsl(var(--brand-700));
  --color-brand-800: hsl(var(--brand-800));
  --color-brand-900: hsl(var(--brand-900));
  --color-brand-950: hsl(var(--brand-950));

  --color-accent-400: hsl(var(--accent-400));
  --color-accent-500: hsl(var(--accent-500));
  --color-accent-600: hsl(var(--accent-600));

  --color-success-500: hsl(var(--success-500));
  --color-warning-500: hsl(var(--warning-500));
  --color-destructive-500: hsl(var(--destructive-500));
  --color-info-500: hsl(var(--info-500));

  /* Radii */
  --radius-sm: var(--radius-sm);
  --radius: var(--radius-md);
  --radius-md: var(--radius-md);
  --radius-lg: var(--radius-lg);
  --radius-xl: var(--radius-xl);

  /* Shadows */
  --shadow-sm: var(--shadow-sm);
  --shadow-md: var(--shadow-md);
  --shadow-lg: var(--shadow-lg);
}

/* Glassmorphism tokens */
:root {
  --glass-tint-light: hsla(210, 65%, 52%, 0.06);
  --glass-tint-dark: hsla(210, 65%, 52%, 0.10);
  --glass-border-light: rgba(255, 255, 255, 0.25);
  --glass-border-dark: rgba(255, 255, 255, 0.15);
  --glass-bg-alpha-base: 0.08;
  /* clamp 0.06-0.18 */
  --glass-bg-alpha-min: 0.06;
  --glass-bg-alpha-max: 0.18;
  --glass-blur-e0: 6px;
  --glass-blur-e1: 10px;
  --glass-blur-e2: 12px;
  --glass-blur-e3: 14px;
  --glass-blur-e4: 16px;
  --glass-shadow-e1: 0 8px 24px rgba(0, 0, 0, 0.12);
  --glass-shadow-e2: 0 12px 32px rgba(0, 0, 0, 0.14);
  --glass-shadow-e3: 0 16px 40px rgba(0, 0, 0, 0.16);
}

/* Fonts (Google Fonts) â€” add to index.html or import here if preferred:
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;600&display=swap" rel="stylesheet">
*/

:root {
  /* Radii */
  --radius-sm: 6px;
  --radius-md: 10px;
  --radius-lg: 14px;
  --radius-xl: 20px;

  /* Shadows */
  --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.08);
  --shadow-md: 0 4px 18px rgba(0, 0, 0, 0.12);
  --shadow-lg: 0 10px 35px rgba(0, 0, 0, 0.16);

  /* Dark theme (default) */
  --bg: 222 44% 6%;
  --fg: 220 14% 96%;
  --surface: 222 36% 9%;
  --muted: 220 13% 17%;
  --border: 222 18% 18%;

  /* Glass defaults (dark) */
  --glass-bg: rgba(0, 0, 0, 0.75);
  --glass-border: rgba(255, 255, 255, 0.35);

  /* Glass blur values */
  --glass-blur-e0: 6px;
  --glass-blur-e1: 10px;
  --glass-blur-e2: 12px;
  --glass-blur-e3: 14px;
  --glass-blur-e4: 16px;

  /* Glass shadow values */
  --glass-shadow-e1: 0 8px 24px rgba(0, 0, 0, 0.12);
  --glass-shadow-e2: 0 12px 32px rgba(0, 0, 0, 0.14);
  --glass-shadow-e3: 0 16px 40px rgba(0, 0, 0, 0.16);

  /* Glass tint values */
  --glass-tint-light: hsla(210, 65%, 52%, 0.06);
  --glass-tint-dark: hsla(210, 65%, 52%, 0.10);
  --glass-border-light: rgba(255, 255, 255, 0.25);
  --glass-border-dark: rgba(255, 255, 255, 0.15);
  --glass-bg-alpha-base: 0.08;
  /* clamp 0.06-0.18 */
  --glass-bg-alpha-min: 0.06;
  --glass-bg-alpha-max: 0.18;

  --brand-50: 191 94% 92%;
  --brand-100: 192 94% 85%;
  --brand-200: 193 90% 72%;
  --brand-300: 194 88% 60%;
  --brand-400: 195 88% 52%;
  --brand-500: 196 95% 49%;
  --brand-600: 198 90% 42%;
  --brand-700: 199 86% 36%;
  --brand-800: 200 80% 28%;
  --brand-900: 201 75% 20%;
  --brand-950: 202 72% 14%;

  --accent-400: 268 100% 76%;
  --accent-500: 268 100% 72%;
  --accent-600: 268 90% 64%;

  --success-500: 152 65% 52%;
  --warning-500: 43 96% 58%;
  --destructive-500: 0 84% 64%;
  --info-500: 199 89% 56%;
}

/* Light theme overrides for glass */
.light {
  --glass-tint: var(--glass-tint-light);
  --glass-border: var(--glass-border-light);
  --glass-bg: rgba(255, 255, 255, 0.20);
  --glass-border: rgba(0, 0, 0, 0.15);
}

/**************** Base ****************/
@layer base {
  html {
    font-family: theme('fontFamily.sans');
  }

  /* Brand-tinted background art layer (behind everything) */
  body {
    @apply bg-bg text-fg;
    position: relative;
    background:
      radial-gradient(1200px 800px at 10% 20%, rgba(139, 92, 246, 0.25), transparent 60%),
      radial-gradient(1000px 700px at 110% 30%, rgba(59, 130, 246, 0.20), transparent 60%),
      radial-gradient(900px 600px at 50% 80%, rgba(139, 92, 246, 0.18), transparent 65%),
      linear-gradient(180deg, #1a1a2e, #1a1a2e 60%, #1a1a2e 100%),
      #1a1a2e;
    background-attachment: fixed;
    filter: saturate(115%);
  }

  /* Add grid texture overlay */
  body::after {
    content: "";
    position: fixed;
    inset: 0;
    z-index: 0;
    pointer-events: none;
    background-image: radial-gradient(rgba(255, 255, 255, 0.06) 1px, transparent 1px);
    background-size: 26px 26px;
    opacity: 0.06;
    mix-blend-mode: overlay;
  }

  * {
    @apply border-border;
  }
}

/**************** Utilities & Components ****************/
@layer components {

  /* Card & surface helpers */
  /* Ensure main content has proper z-index */
  .container {
    @apply mx-auto w-full max-w-7xl px-4 sm:px-6 lg:px-8;
    position: relative;
    z-index: 1;
  }

  main {
    position: relative;
    z-index: 1;
    background-color: rgba(26, 26, 46, 0.2) !important;
    backdrop-filter: blur(3px);
    -webkit-backdrop-filter: blur(3px);
  }

  /* Make cards and content semi-transparent so background shows through */
  .card {
    @apply bg-surface text-fg rounded-md shadow-sm p-4;
    border: 1px solid;
    border-image: linear-gradient(135deg, rgba(139, 92, 246, 0.3), rgba(59, 130, 246, 0.3)) 1;
    box-shadow: 0 0 10px rgba(139, 92, 246, 0.1);
    background-color: rgba(26, 26, 46, 0.3) !important;
    backdrop-filter: blur(5px);
    -webkit-backdrop-filter: blur(5px);
  }

  .divider {
    @apply border-t border;
  }

  /* Glass base utility (E1 by default) */
  .glass {
    position: relative;
    z-index: 2;
    /* Real glassmorphism: translucent with backdrop blur */
    background-color: rgba(255, 255, 255, 0.08);
    backdrop-filter: blur(var(--glass-blur, var(--glass-blur-e1)));
    -webkit-backdrop-filter: blur(var(--glass-blur, var(--glass-blur-e1)));
    /* Blue/purple border mix */
    border: 1px solid;
    border-image: linear-gradient(135deg, rgba(139, 92, 246, 0.4), rgba(59, 130, 246, 0.4)) 1;
    box-shadow: var(--glass-shadow, var(--glass-shadow-e1)), 0 0 15px rgba(139, 92, 246, 0.15);

    /* Smooth transitions for interactions */
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  /* Proper elevation scaling for Glassmorphism 2.0 */
  .glass-e0 {
    --glass-blur: var(--glass-blur-e0);
    --glass-shadow: var(--glass-shadow-e1);
    background-color: rgba(255, 255, 255, 0.06);
    backdrop-filter: blur(6px);
    -webkit-backdrop-filter: blur(6px);
  }

  .glass-e1 {
    --glass-blur: var(--glass-blur-e1);
    --glass-shadow: var(--glass-shadow-e1);
    background-color: rgba(255, 255, 255, 0.08);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
  }

  .glass-e2 {
    --glass-blur: var(--glass-blur-e2);
    --glass-shadow: var(--glass-shadow-e2);
    background-color: rgba(255, 255, 255, 0.10);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
  }

  .glass-e3 {
    --glass-blur: var(--glass-blur-e3);
    --glass-shadow: var(--glass-shadow-e3);
    background-color: rgba(255, 255, 255, 0.12);
    backdrop-filter: blur(14px);
    -webkit-backdrop-filter: blur(14px);
  }

  .glass-e4 {
    --glass-blur: var(--glass-blur-e4);
    --glass-shadow: var(--glass-shadow-e3);
    background-color: rgba(255, 255, 255, 0.14);
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);
  }

  /* Light theme adjustments for proper contrast */
  .light .glass {
    background-color: rgba(0, 0, 0, 0.08);
    border: 1px solid rgba(0, 0, 0, 0.15);
  }

  .light .glass-e0 {
    background-color: rgba(0, 0, 0, 0.06);
  }

  .light .glass-e1 {
    background-color: rgba(0, 0, 0, 0.08);
  }

  .light .glass-e2 {
    background-color: rgba(0, 0, 0, 0.10);
  }

  .light .glass-e3 {
    background-color: rgba(0, 0, 0, 0.12);
  }

  .light .glass-e4 {
    background-color: rgba(0, 0, 0, 0.14);
  }

  /* Hover effects for interactive glass elements */
  .glass:hover {
    transform: scale(1.01);
    /* Rim highlight brightens on hover */
    border-color: rgba(255, 255, 255, 0.35);
    box-shadow:
      var(--glass-shadow, var(--glass-shadow-e1)),
      0 8px 25px rgba(0, 0, 0, 0.2);
  }

  /* Active state for buttons and interactive elements */
  .glass:active {
    transform: scale(0.99);
    /* Glass "hardens" - reduce blur by 2px */
    backdrop-filter: blur(calc(var(--glass-blur, var(--glass-blur-e1)) - 2px));
    -webkit-backdrop-filter: blur(calc(var(--glass-blur, var(--glass-blur-e1)) - 2px));
    transition: all 0.1s ease;
  }

  /* Chart reveal animation - blur-in instead of just appearing */
  .glass.chart-reveal {
    animation: glassReveal 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  @keyframes glassReveal {
    from {
      opacity: 0;
      backdrop-filter: blur(0px);
      -webkit-backdrop-filter: blur(0px);
      transform: translateY(10px);
    }

    to {
      opacity: 1;
      backdrop-filter: blur(var(--glass-blur, var(--glass-blur-e1)));
      -webkit-backdrop-filter: blur(var(--glass-blur, var(--glass-blur-e1)));
      transform: translateY(0px);
    }
  }

  .glass-highlight::before {
    content: "";
    position: absolute;
    inset: 0;
    border-radius: inherit;
    background: linear-gradient(180deg, rgba(255, 255, 255, 0.2), transparent 70%);
    pointer-events: none;
  }

  /* Ensure tables maintain dark styling regardless of glass effects */
  table {
    background-color: hsl(var(--surface)) !important;
    color: hsl(var(--fg)) !important;
  }

  th,
  td {
    background-color: hsl(var(--surface)) !important;
    color: hsl(var(--fg)) !important;
    border-color: hsl(var(--border)) !important;
  }

  /* Override any glass effects on table elements */
  .glass table,
  .glass th,
  .glass td {
    background-color: hsl(var(--surface)) !important;
    color: hsl(var(--fg)) !important;
  }

  /* Fallback: when backdrop-filter is not supported */
  [data-backdrop="off"] .glass {
    --glass-blur: 0px;
    background-color: rgba(0, 0, 0, 0.85);
    border: 1px solid rgba(255, 255, 255, 0.25);
  }

  .light [data-backdrop="off"] .glass {
    background-color: rgba(255, 255, 255, 0.85);
    border: 1px solid rgba(0, 0, 0, 0.15);
  }

  /* Elevation-specific fallbacks */
  [data-backdrop="off"] .glass-e0 {
    background-color: rgba(0, 0, 0, 0.80);
  }

  [data-backdrop="off"] .glass-e1 {
    background-color: rgba(0, 0, 0, 0.82);
  }

  [data-backdrop="off"] .glass-e2 {
    background-color: rgba(0, 0, 0, 0.85);
  }

  [data-backdrop="off"] .glass-e3 {
    background-color: rgba(0, 0, 0, 0.88);
  }

  [data-backdrop="off"] .glass-e4 {
    background-color: rgba(0, 0, 0, 0.90);
  }

  .light [data-backdrop="off"] .glass-e0 {
    background-color: rgba(255, 255, 255, 0.80);
  }

  .light [data-backdrop="off"] .glass-e1 {
    background-color: rgba(255, 255, 255, 0.82);
  }

  .light [data-backdrop="off"] .glass-e2 {
    background-color: rgba(255, 255, 255, 0.85);
  }

  .light [data-backdrop="off"] .glass-e3 {
    background-color: rgba(255, 255, 255, 0.88);
  }

  .light [data-backdrop="off"] .glass-e4 {
    background-color: rgba(255, 255, 255, 0.90);
  }

  /* Table zebra rows and hover for readability */
  table tbody tr:nth-child(odd) td {
    background-color: rgba(255, 255, 255, 0.02) !important;
  }

  table tbody tr:hover td {
    background-color: rgba(255, 255, 255, 0.06) !important;
  }

  .light table tbody tr:nth-child(odd) td {
    background-color: rgba(0, 0, 0, 0.03) !important;
  }

  .light table tbody tr:hover td {
    background-color: rgba(0, 0, 0, 0.06) !important;
  }

  /* Stronger header/cell typography for contrast */
  table th {
    font-weight: 600;
    opacity: 0.95;
  }

  table td {
    opacity: 0.9;
  }
}

/**************** Motion ****************/
@media (prefers-reduced-motion: reduce) {
  .hover\:scale-\[1\.01\]:hover {
    transform: none !important;
  }

  .active\:scale-\[0\.99\]:active {
    transform: none !important;
  }
}